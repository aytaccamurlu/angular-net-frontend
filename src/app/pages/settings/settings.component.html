<div class="settings-page">
    <div class="header-section">
        <h2>âš™ï¸ Sistem AyarlarÄ± & KullanÄ±cÄ± YÃ¶netimi</h2>
        <p>Uygulama genel yapÄ±landÄ±rmasÄ±nÄ± ve kullanÄ±cÄ± yetkilerini buradan yÃ¶netebilirsiniz.</p>
    </div>

    <div class="settings-card shadow-sm">
        <h3>{{ isEditMode ? 'ğŸ‘¤ KullanÄ±cÄ±yÄ± DÃ¼zenle' : 'â• Yeni KullanÄ±cÄ± Ekle' }}</h3>
        <div class="form-grid">
            <div class="form-group">
                <label>Ad Soyad</label>
                <input type="text" [(ngModel)]="newUser.full_name" class="form-control" name="fullName">
            </div>
            <div class="form-group">
                <label>E-posta</label>
                <input type="email" [(ngModel)]="newUser.email" class="form-control" name="uEmail">
            </div>
            <div class="form-group" *ngIf="!isEditMode">
                <label>Åifre</label>
                <input type="password" [(ngModel)]="newUser.password" class="form-control" name="uPass">
            </div>
            <div class="form-group">
                <label>Rol</label>
                <select [(ngModel)]="newUser.role" class="form-control" name="uRole">
                    <option value="admin">Admin</option>
                    <option value="staff">Personel</option>
                    <option value="dealer">Bayi (Dealer)</option>
                </select>
            </div>
        </div>
        <div class="mt-3">
            <button class="save-btn" (click)="saveUser()">{{ isEditMode ? 'GÃ¼ncelle' : 'Ekle' }}</button>
            <button class="cancel-btn" *ngIf="isEditMode" (click)="resetForm()">Ä°ptal</button>
        </div>
    </div>

    <div class="settings-card shadow-sm mt-4">
        <h3>ğŸ‘¥ KayÄ±tlÄ± KullanÄ±cÄ±lar</h3>
        <div class="table-responsive">
            <table class="user-table">
                <thead>
                    <tr>
                        <th>Ad Soyad</th>
                        <th>E-posta</th>
                        <th>Rol</th>
                        <th>Ä°ÅŸlemler</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let user of users">
                        <td>{{ user.full_name || user.FullName }}</td>
                        <td>{{ user.email || user.Email }}</td>
                        <td>
                            <span class="badge" [ngClass]="(user.role || user.Role)?.toLowerCase()">
                                {{ user.role || user.Role }}
                            </span>
                        </td>
                        <td>
                            <button class="edit-icon-btn" (click)="editUser(user)">âœï¸</button>
                            <button class="delete-icon-btn" (click)="deleteUser(user.id || user.Id)">ğŸ—‘ï¸</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="settings-card shadow-sm">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h3>ğŸ¢ Firma Bilgileri DÃ¼zenleme</h3>
            <button class="btn btn-sm btn-outline-primary" (click)="prepareNewSettings()">â• Yeni Firma Ekle</button>
        </div>
        <div class="form-grid">
            <div class="form-group">
                <label>Firma AdÄ±</label>
                <input type="text" class="form-control" [(ngModel)]="activeSettings.companyName" name="cName">
            </div>
            <div class="form-group">
                <label>Vergi Dairesi / No</label>
                <input type="text" class="form-control" [(ngModel)]="activeSettings.taxInfo" name="tInfo"
                    placeholder="Vergi No girin">
            </div>
            <div class="form-group">
                <label>Para Birimi</label>
                <select class="form-control" [(ngModel)]="activeSettings.currency" name="curr">
                    <option value="TRY">TRY (â‚º)</option>
                    <option value="USD">USD ($)</option>
                    <option value="EUR">EUR (â‚¬)</option>
                </select>
            </div>
        </div>
        <button class="save-btn mt-3" (click)="saveGeneralSettings()" [disabled]="loading">
            {{ activeSettings.id ? 'GÃ¼ncelle' : 'SÄ±fÄ±rdan Ekle' }}
        </button>
    </div>

    <div class="settings-card shadow-sm mt-4">
        <h3>ğŸ“‹ KayÄ±tlÄ± Firma Listesi</h3>
        <div class="table-responsive">
            <table class="user-table">
                <thead>
                    <tr>
                        <th>Firma AdÄ±</th>
                        <th>Vergi No</th>
                        <th>Para Birimi</th>

                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let item of settingsList">
                        <td><strong>{{ item.companyName }}</strong></td>
                        <td>{{ item.taxInfo || '---' }}</td>
                        <td>{{ item.currency }}</td>

                    </tr>
                </tbody>
            </table>
        </div>
    </div>


</div>